# Nginx конфигурация за добавяне в основния nginx контейнер (maire-nginx)
# Това е за случая, когато искаш да използваш същия nginx контейнер

server {
    listen 80;
    server_name _;  # Или IP адреса на сървъра
    
    # Location за новия сайт - може да използваш път или поддомейн
    location /metalworking {
        alias /var/www/metalworking/public;
        try_files $uri $uri/ @metalworking;

        location ~ \.php$ {
            fastcgi_pass metalworking-app:9000;
            fastcgi_param SCRIPT_FILENAME $request_filename;
            include fastcgi_params;
            fastcgi_hide_header X-Powered-By;
        }
    }

    location @metalworking {
        rewrite /metalworking/(.*)$ /metalworking/index.php?/$1 last;
    }
}

# Алтернатива: Ако искаш да използваш различен порт в същия nginx
# Можеш да добавиш нов server block който слуша на друг порт



